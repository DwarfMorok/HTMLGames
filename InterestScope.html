<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>InterestScope | –ê–Ω–∞–ª–∏–∑ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω–æ—Å—Ç–∏ –∏–Ω—Ç–µ—Ä–µ—Å–æ–≤</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* Modern CSS Reset */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            /* Colors */
            --primary-50: #f0f9ff;
            --primary-100: #e0f2fe;
            --primary-500: #0ea5e9;
            --primary-600: #0284c7;
            --primary-700: #0369a1;
            
            --gray-50: #f9fafb;
            --gray-100: #f3f4f6;
            --gray-200: #e5e7eb;
            --gray-300: #d1d5db;
            --gray-400: #9ca3af;
            --gray-500: #6b7280;
            --gray-600: #4b5563;
            --gray-700: #374151;
            --gray-800: #1f2937;
            --gray-900: #111827;
            
            --success: #10b981;
            --warning: #f59e0b;
            --error: #ef4444;
            
            /* Typography */
            --font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            
            /* Spacing */
            --space-xs: 0.5rem;
            --space-sm: 1rem;
            --space-md: 1.5rem;
            --space-lg: 2rem;
            --space-xl: 3rem;
            
            /* Border Radius */
            --radius-sm: 0.5rem;
            --radius-md: 0.75rem;
            --radius-lg: 1rem;
            
            /* Shadows */
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        /* Base Styles */
        body {
            font-family: var(--font-family);
            line-height: 1.6;
            color: var(--gray-800);
            background: linear-gradient(135deg, var(--gray-50) 0%, var(--gray-100) 100%);
            min-height: 100vh;
        }

        .app-container {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Header */
        .main-header {
            background: white;
            border-bottom: 1px solid var(--gray-200);
            padding: var(--space-lg) 0;
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 var(--space-md);
            text-align: center;
        }

        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-sm);
            margin-bottom: var(--space-sm);
        }

        .logo-icon {
            font-size: 2rem;
        }

        .logo h1 {
            font-size: 2rem;
            font-weight: 700;
            color: var(--gray-900);
        }

        .tagline {
            color: var(--gray-600);
            font-size: 1.1rem;
            font-weight: 400;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            max-width: 1200px;
            margin: 0 auto;
            padding: var(--space-xl) var(--space-md);
            width: 100%;
        }

        .section-header {
            text-align: center;
            margin-bottom: var(--space-xl);
        }

        .section-header h2 {
            font-size: 2rem;
            font-weight: 700;
            color: var(--gray-900);
            margin-bottom: var(--space-sm);
        }

        .section-header p {
            color: var(--gray-600);
            font-size: 1.1rem;
        }

        /* Calculator Card */
        .calculator-card {
            background: white;
            border-radius: var(--radius-lg);
            padding: var(--space-xl);
            box-shadow: var(--shadow-lg);
            margin-bottom: var(--space-xl);
        }

        .input-section {
            max-width: 500px;
            margin: 0 auto;
        }

        .input-group {
            margin-bottom: var(--space-lg);
        }

        .input-label {
            display: block;
            font-weight: 600;
            color: var(--gray-700);
            margin-bottom: var(--space-xs);
            font-size: 0.95rem;
        }

        .modern-select, .modern-input {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 2px solid var(--gray-200);
            border-radius: var(--radius-md);
            font-size: 1rem;
            transition: all 0.2s ease;
            background: white;
        }

        .modern-select:focus, .modern-input:focus {
            outline: none;
            border-color: var(--primary-500);
            box-shadow: 0 0 0 3px rgba(14, 165, 233, 0.1);
        }

        .input-divider {
            text-align: center;
            margin: var(--space-lg) 0;
            position: relative;
        }

        .input-divider::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 1px;
            background: var(--gray-200);
        }

        .input-divider span {
            background: white;
            padding: 0 var(--space-sm);
            color: var(--gray-500);
            font-size: 0.9rem;
        }

        .input-with-help {
            position: relative;
            display: flex;
            align-items: center;
        }

        .help-tooltip {
            position: absolute;
            right: 1rem;
            background: var(--gray-200);
            color: var(--gray-600);
            width: 1.25rem;
            height: 1.25rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            cursor: help;
        }

        /* Buttons */
        .primary-btn, .secondary-btn {
            display: inline-flex;
            align-items: center;
            gap: var(--space-xs);
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: var(--radius-md);
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            text-decoration: none;
        }

        .primary-btn {
            background: var(--primary-600);
            color: white;
        }

        .primary-btn:hover {
            background: var(--primary-700);
            transform: translateY(-1px);
            box-shadow: var(--shadow-md);
        }

        .secondary-btn {
            background: white;
            color: var(--gray-700);
            border: 2px solid var(--gray-200);
        }

        .secondary-btn:hover {
            border-color: var(--primary-500);
            color: var(--primary-600);
        }

        .btn-icon {
            font-size: 1.1rem;
        }

        .full-width {
            width: 100%;
            justify-content: center;
        }

        /* Quick Estimate */
        .quick-estimate {
            margin-top: var(--space-xl);
            padding-top: var(--space-lg);
            border-top: 1px solid var(--gray-200);
            text-align: center;
        }

        .quick-estimate h3 {
            margin-bottom: var(--space-sm);
            color: var(--gray-800);
        }

        .quick-estimate p {
            color: var(--gray-600);
            margin-bottom: var(--space-md);
        }

        /* Results Section */
        .results-section {
            margin-bottom: var(--space-xl);
        }

        .results-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--space-lg);
        }

        .chart-card, .stats-card {
            background: white;
            border-radius: var(--radius-lg);
            padding: var(--space-lg);
            box-shadow: var(--shadow-lg);
        }

        .chart-header {
            margin-bottom: var(--space-md);
        }

        .chart-header h3 {
            color: var(--gray-800);
            font-size: 1.25rem;
        }

        .chart-container {
            height: 300px;
            position: relative;
        }

        /* Statistics */
        .statistics {
            margin-bottom: var(--space-lg);
        }

        .primary-stat {
            background: var(--primary-50);
            border: 1px solid var(--primary-100);
            border-radius: var(--radius-md);
            padding: var(--space-md);
            margin-bottom: var(--space-md);
        }

        .stat-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: var(--space-sm) 0;
            border-bottom: 1px solid var(--gray-100);
        }

        .stat-item:last-child {
            border-bottom: none;
        }

        .stat-label {
            color: var(--gray-600);
            font-size: 0.95rem;
        }

        .stat-value {
            font-weight: 600;
            color: var(--gray-800);
        }

        .primary-stat .stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-600);
        }

        /* Insights Card */
        .insights-card {
            background: var(--gray-50);
            border-radius: var(--radius-md);
            padding: var(--space-md);
            border-left: 4px solid var(--primary-500);
        }

        .insights-card h4 {
            color: var(--gray-800);
            margin-bottom: var(--space-sm);
        }

        .insights-card p {
            color: var(--gray-600);
            line-height: 1.6;
        }

        /* Knowledge Base */
        .knowledge-controls {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--space-lg);
            margin-bottom: var(--space-lg);
        }

        .category-filter, .search-box {
            display: flex;
            flex-direction: column;
        }

        .category-filter label {
            margin-bottom: var(--space-xs);
            font-weight: 600;
            color: var(--gray-700);
        }

        .knowledge-stats {
            text-align: center;
            margin-bottom: var(--space-lg);
            color: var(--gray-600);
            font-size: 0.95rem;
        }

        .knowledge-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: var(--space-lg);
        }

        .knowledge-item {
            background: white;
            border-radius: var(--radius-lg);
            padding: var(--space-lg);
            box-shadow: var(--shadow-md);
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .knowledge-item:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        /* Category Badges */
        .category-badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 1rem;
            font-size: 0.8rem;
            font-weight: 600;
            margin-bottom: var(--space-sm);
        }

        .category-body_parts { background: var(--primary-100); color: var(--primary-700); }
        .category-materials { background: #fef3c7; color: #92400e; }
        .category-clothing { background: #d1fae5; color: #065f46; }
        .category-behavioral { background: #e0e7ff; color: #3730a3; }
        .category-psychological { background: #fce7f3; color: #9d174d; }
        .category-rare { background: #fef2f2; color: #991b1b; }

        .knowledge-item h3 {
            color: var(--gray-800);
            margin-bottom: var(--space-xs);
        }

        .knowledge-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-sm);
        }

        .knowledge-prevalence {
            color: var(--primary-600);
            font-weight: 600;
            font-size: 1.1rem;
        }

        .research-indicator {
            font-size: 0.8rem;
            color: var(--gray-500);
        }

        .knowledge-item p {
            color: var(--gray-600);
            line-height: 1.5;
            margin-bottom: var(--space-sm);
        }

        .knowledge-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.85rem;
            color: var(--gray-500);
        }

        .use-interest-btn {
            padding: 0.4rem 0.8rem;
            font-size: 0.8rem;
        }

        /* Modal */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: var(--space-md);
        }

        .modal-content {
            background: white;
            border-radius: var(--radius-lg);
            padding: var(--space-xl);
            max-width: 500px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-lg);
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--gray-500);
            padding: 0;
            width: 2rem;
            height: 2rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .close-btn:hover {
            color: var(--gray-700);
        }

        .estimator-steps {
            margin-bottom: var(--space-lg);
        }

        .step {
            margin-bottom: var(--space-md);
        }

        .step-label {
            display: block;
            font-weight: 600;
            color: var(--gray-700);
            margin-bottom: var(--space-xs);
        }

        .estimation-results {
            margin: var(--space-lg) 0;
        }

        .estimation-card {
            background: var(--primary-50);
            border: 1px solid var(--primary-100);
            border-radius: var(--radius-md);
            padding: var(--space-lg);
            text-align: center;
        }

        .estimation-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-md);
        }

        .confidence-badge {
            background: var(--success);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 1rem;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .estimation-value {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--primary-600);
            margin-bottom: var(--space-sm);
        }

        .estimation-explanation {
            color: var(--gray-600);
            margin-bottom: var(--space-md);
            line-height: 1.5;
        }

        /* Footer */
        .main-footer {
            background: var(--gray-800);
            color: white;
            padding: var(--space-xl) 0;
            margin-top: auto;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 var(--space-md);
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--space-xl);
        }

        .footer-info h3 {
            margin-bottom: var(--space-sm);
            color: white;
        }

        .footer-info p {
            color: var(--gray-300);
            line-height: 1.6;
        }

        .footer-disclaimer p {
            color: var(--gray-400);
            font-size: 0.9rem;
            line-height: 1.5;
        }

        .database-stats {
            display: flex;
            gap: var(--space-lg);
            margin-top: var(--space-md);
        }

        .database-stats .stat-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            border: none;
            padding: 0;
        }

        .database-stats .stat-number {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-500);
        }

        .database-stats .stat-label {
            font-size: 0.85rem;
            color: var(--gray-400);
            margin-top: var(--space-xs);
        }

        /* Utility Classes */
        .hidden {
            display: none !important;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .results-grid {
                grid-template-columns: 1fr;
            }
            
            .footer-content {
                grid-template-columns: 1fr;
                gap: var(--space-lg);
            }
            
            .calculator-card {
                padding: var(--space-lg);
            }
            
            .modal-content {
                padding: var(--space-lg);
            }
            
            .knowledge-grid {
                grid-template-columns: 1fr;
            }
            
            .knowledge-controls {
                grid-template-columns: 1fr;
                gap: var(--space-md);
            }
        }

        @media (max-width: 480px) {
            .main-content {
                padding: var(--space-lg) var(--space-sm);
            }
            
            .section-header h2 {
                font-size: 1.5rem;
            }
            
            .logo h1 {
                font-size: 1.5rem;
            }
            
            .tagline {
                font-size: 1rem;
            }
            
            .database-stats {
                flex-direction: column;
                gap: var(--space-sm);
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="main-header">
            <div class="header-content">
                <div class="logo">
                    <div class="logo-icon">üìä</div>
                    <h1>InterestScope</h1>
                </div>
                <p class="tagline">–ù–∞—É—á–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∫ –∞–Ω–∞–ª–∏–∑—É —á–µ–ª–æ–≤–µ—á–µ—Å–∫–∏—Ö –∏–Ω—Ç–µ—Ä–µ—Å–æ–≤</p>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Calculator Section -->
            <section class="calculator-section">
                <div class="section-header">
                    <h2>–ê–Ω–∞–ª–∏–∑ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω–æ—Å—Ç–∏</h2>
                    <p>–ò—Å—Å–ª–µ–¥—É–π—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∏–Ω—Ç–µ—Ä–µ—Å–æ–≤ –∏ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–π</p>
                </div>

                <div class="calculator-card">
                    <div class="input-section">
                        <div class="input-group">
                            <label class="input-label">–í—ã–±–µ—Ä–∏—Ç–µ –∏–Ω—Ç–µ—Ä–µ—Å –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞</label>
                            <select id="interestSelect" class="modern-select">
                                <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ –∏–∑ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π --</option>
                            </select>
                        </div>

                        <div class="input-divider">
                            <span>–∏–ª–∏</span>
                        </div>

                        <div class="input-group">
                            <label class="input-label">–í–≤–µ–¥–∏—Ç–µ —Å–≤–æ–π –≤–∞—Ä–∏–∞–Ω—Ç</label>
                            <input type="text" id="customInterest" class="modern-input" placeholder="–û–ø–∏—à–∏—Ç–µ –∏–Ω—Ç–µ—Ä–µ—Å...">
                        </div>

                        <div class="prevalence-input">
                            <label class="input-label">–†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω–æ—Å—Ç—å (%)</label>
                            <div class="input-with-help">
                                <input type="number" id="prevalenceInput" class="modern-input" 
                                       min="0" max="100" step="0.1" placeholder="0.0">
                                <div class="help-tooltip" data-tooltip="–ü—Ä–æ—Ü–µ–Ω—Ç –ª—é–¥–µ–π –≤ –ø–æ–ø—É–ª—è—Ü–∏–∏ —Å –¥–∞–Ω–Ω—ã–º –∏–Ω—Ç–µ—Ä–µ—Å–æ–º">
                                    ?
                                </div>
                            </div>
                        </div>

                        <button id="calculateBtn" class="primary-btn">
                            <span class="btn-icon">üìà</span>
                            –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å
                        </button>
                    </div>

                    <div class="quick-estimate">
                        <h3>–ë—ã—Å—Ç—Ä–∞—è –æ—Ü–µ–Ω–∫–∞</h3>
                        <p>–ù–µ –∑–Ω–∞–µ—Ç–µ —Ç–æ—á–Ω—ã–π –ø—Ä–æ—Ü–µ–Ω—Ç? –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–∞—à –∞–ª–≥–æ—Ä–∏—Ç–º –æ—Ü–µ–Ω–∫–∏:</p>
                        <button id="openEstimatorBtn" class="secondary-btn">
                            <span class="btn-icon">üéØ</span>
                            –û—Ü–µ–Ω–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
                        </button>
                    </div>
                </div>
            </section>

            <!-- Results Section -->
            <section id="resultsSection" class="results-section hidden">
                <div class="section-header">
                    <h2>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞</h2>
                    <p id="interestSubtitle">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä–µ—Å–∞</p>
                </div>

                <div class="results-grid">
                    <div class="chart-card">
                        <div class="chart-header">
                            <h3>–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤ –ø–æ–ø—É–ª—è—Ü–∏–∏</h3>
                        </div>
                        <div class="chart-container">
                            <canvas id="prevalenceChart"></canvas>
                        </div>
                    </div>

                    <div class="stats-card">
                        <div class="statistics">
                            <div class="stat-item primary-stat">
                                <div class="stat-label">–†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω–æ—Å—Ç—å</div>
                                <div class="stat-value" id="prevalenceResult">0%</div>
                            </div>
                            
                            <div class="stat-group">
                                <div class="stat-item">
                                    <div class="stat-label">–í –†–æ—Å—Å–∏–∏ (144 –º–ª–Ω)</div>
                                    <div class="stat-value" id="peopleRussia">0 —á–µ–ª.</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-label">–í –º–∏—Ä–µ (8 –º–ª—Ä–¥)</div>
                                    <div class="stat-value" id="peopleWorld">0 —á–µ–ª.</div>
                                </div>
                            </div>
                        </div>

                        <div class="insights-card">
                            <h4>–ò–Ω—Å–∞–π—Ç—ã</h4>
                            <p id="interestDescription">–û–ø–∏—Å–∞–Ω–∏–µ –∏ –∞–Ω–∞–ª–∏–∑ –ø–æ—è–≤—è—Ç—Å—è –∑–¥–µ—Å—å –ø–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ –∏–Ω—Ç–µ—Ä–µ—Å–∞.</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Knowledge Base -->
            <section class="knowledge-section">
                <div class="section-header">
                    <h2>–ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π</h2>
                    <p>–ò–∑—É—á–∏—Ç–µ —Ä–∞–∑–ª–∏—á–Ω—ã–µ –∏–Ω—Ç–µ—Ä–µ—Å—ã –∏ –∏—Ö —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω–æ—Å—Ç—å</p>
                </div>

                <div class="knowledge-controls">
                    <div class="category-filter">
                        <label>–§–∏–ª—å—Ç—Ä –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º:</label>
                        <select id="categoryFilter" class="modern-select">
                            <option value="all">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option>
                            <option value="body_parts">–ß–∞—Å—Ç–∏ —Ç–µ–ª–∞</option>
                            <option value="materials">–ú–∞—Ç–µ—Ä–∏–∞–ª—ã –∏ —Ç–µ–∫—Å—Ç—É—Ä—ã</option>
                            <option value="clothing">–û–¥–µ–∂–¥–∞ –∏ –æ–±—É–≤—å</option>
                            <option value="behavioral">–ü–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–µ</option>
                            <option value="psychological">–ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ</option>
                            <option value="rare">–†–µ–¥–∫–∏–µ –∏ —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–µ</option>
                        </select>
                    </div>
                    <div class="search-box">
                        <input type="text" id="knowledgeSearch" class="modern-input" placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∏–ª–∏ –æ–ø–∏—Å–∞–Ω–∏—é...">
                    </div>
                </div>

                <div class="knowledge-stats">
                    <span id="itemsCount">–ù–∞–π–¥–µ–Ω–æ 0 –∏–Ω—Ç–µ—Ä–µ—Å–æ–≤</span>
                </div>

                <div class="knowledge-grid" id="knowledgeBase">
                    <!-- Knowledge items will be populated by JS -->
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer class="main-footer">
            <div class="footer-content">
                <div class="footer-info">
                    <h3>InterestScope</h3>
                    <p>–ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —á–µ–ª–æ–≤–µ—á–µ—Å–∫–æ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏—è –∏ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–π</p>
                    <div class="database-stats">
                        <div class="stat-item">
                            <span class="stat-number" id="totalInterests">0</span>
                            <span class="stat-label">–∏–Ω—Ç–µ—Ä–µ—Å–æ–≤ –≤ –±–∞–∑–µ</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number" id="totalCategories">0</span>
                            <span class="stat-label">–∫–∞—Ç–µ–≥–æ—Ä–∏–π</span>
                        </div>
                    </div>
                </div>
                <div class="footer-disclaimer">
                    <p><strong>–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:</strong> –í—Å–µ –¥–∞–Ω–Ω—ã–µ —è–≤–ª—è—é—Ç—Å—è —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–º–∏ –æ—Ü–µ–Ω–∫–∞–º–∏, –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–º–∏ –Ω–∞ –Ω–∞—É—á–Ω—ã—Ö –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è—Ö –∏ —Å–æ—Ü–∏–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –æ–ø—Ä–æ—Å–∞—Ö. –†–∞—Å—á—ë—Ç—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –≤ –≤–∞—à–µ–º –±—Ä–∞—É–∑–µ—Ä–µ –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏.</p>
                </div>
            </div>
        </footer>
    </div>

    <!-- Estimator Modal -->
    <div id="estimatorModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2>–û—Ü–µ–Ω–∫–∞ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω–æ—Å—Ç–∏</h2>
                <button id="closeModalBtn" class="close-btn">&times;</button>
            </div>
            
            <div class="modal-body">
                <div class="estimator-steps">
                    <div class="step">
                        <label class="step-label">–¢–∏–ø –∏–Ω—Ç–µ—Ä–µ—Å–∞</label>
                        <select id="interestType" class="modern-select">
                            <option value="common">–ü–æ–≤—Å–µ–¥–Ω–µ–≤–Ω—ã–π (–æ–¥–µ–∂–¥–∞, –≤–Ω–µ—à–Ω–æ—Å—Ç—å)</option>
                            <option value="behavioral">–ü–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–π (–¥–µ–π—Å—Ç–≤–∏—è, —Å—Ü–µ–Ω–∞—Ä–∏–∏)</option>
                            <option value="material">–ü—Ä–µ–¥–º–µ—Ç–Ω—ã–π (–æ–±—ä–µ–∫—Ç—ã, –º–∞—Ç–µ—Ä–∏–∞–ª—ã)</option>
                            <option value="psychological">–ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π (—Å–æ—Å—Ç–æ—è–Ω–∏—è, —ç–º–æ—Ü–∏–∏)</option>
                            <option value="rare">–†–µ–¥–∫–∏–π/—Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–π</option>
                        </select>
                    </div>

                    <div class="step">
                        <label class="step-label">–°–æ—Ü–∏–∞–ª—å–Ω–∞—è –≤–∏–¥–∏–º–æ—Å—Ç—å</label>
                        <select id="socialVisibility" class="modern-select">
                            <option value="high">–í—ã—Å–æ–∫–∞—è (–æ—Ç–∫—Ä—ã—Ç–æ –æ–±—Å—É–∂–¥–∞–µ—Ç—Å—è)</option>
                            <option value="medium">–°—Ä–µ–¥–Ω—è—è (–∏–∑–≤–µ—Å—Ç–µ–Ω, –Ω–æ –Ω–µ –º–∞—Å—Å–æ–≤–æ)</option>
                            <option value="low">–ù–∏–∑–∫–∞—è (–≤ —É–∑–∫–∏—Ö –∫—Ä—É–≥–∞—Ö)</option>
                            <option value="very_low">–°–∫—Ä—ã—Ç—ã–π (—Ç–∞–±—É–∏—Ä–æ–≤–∞–Ω)</option>
                        </select>
                    </div>

                    <div class="step">
                        <label class="step-label">–°–ª–æ–∂–Ω–æ—Å—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏</label>
                        <select id="complexityLevel" class="modern-select">
                            <option value="easy">–ü—Ä–æ—Å—Ç–∞—è (–¥–æ—Å—Ç—É–ø–Ω–∞ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤—É)</option>
                            <option value="medium">–£–º–µ—Ä–µ–Ω–Ω–∞—è (—Ç—Ä–µ–±—É–µ—Ç —É—Å–ª–æ–≤–∏–π)</option>
                            <option value="hard">–°–ª–æ–∂–Ω–∞—è (—Ä–µ–¥–∫–æ –¥–æ—Å—Ç–∏–∂–∏–º–∞)</option>
                        </select>
                    </div>
                </div>

                <div id="estimationResults" class="estimation-results hidden">
                    <div class="estimation-card">
                        <div class="estimation-header">
                            <h3>–†–µ–∑—É–ª—å—Ç–∞—Ç –æ—Ü–µ–Ω–∫–∏</h3>
                            <div class="confidence-badge" id="confidenceBadge">–í—ã—Å–æ–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å</div>
                        </div>
                        <div class="estimation-value" id="estimatedValue">0%</div>
                        <p class="estimation-explanation" id="estimationExplanation"></p>
                        <button id="applyEstimationBtn" class="primary-btn">–ü—Ä–∏–º–µ–Ω–∏—Ç—å –æ—Ü–µ–Ω–∫—É</button>
                    </div>
                </div>

                <button id="estimateBtn" class="primary-btn full-width">
                    <span class="btn-icon">üîç</span>
                    –†–∞—Å—Å—á–∏—Ç–∞—Ç—å –æ—Ü–µ–Ω–∫—É
                </button>
            </div>
        </div>
    </div>

    <script>
        // –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –±–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –æ –∏–Ω—Ç–µ—Ä–µ—Å–∞—Ö –∏ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è—Ö
        const interestsDatabase = [
            // === –ö–ê–¢–ï–ì–û–†–ò–Ø: –ß–∞—Å—Ç–∏ —Ç–µ–ª–∞ (–°–æ–º–∞—Ç–æ—Ñ–∏–ª–∏—è) ===
            {
                name: "–ê–Ω–¥—Ä–æ—Ñ–∏–ª–∏—è/–ì–∏–Ω–æ—Ñ–∏–ª–∏—è",
                prevalence: 95.0,
                category: "body_parts",
                description: "–í–ª–µ—á–µ–Ω–∏–µ –∫ –≤–∑—Ä–æ—Å–ª—ã–º –ª—é–¥—è–º –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω–æ–≥–æ –∏–ª–∏ —Å–≤–æ–µ–≥–æ –ø–æ–ª–∞. –Ø–≤–ª—è–µ—Ç—Å—è —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–æ–π –Ω–æ—Ä–º–æ–π –≤ —á–µ–ª–æ–≤–µ—á–µ—Å–∫–æ–π –ø–æ–ø—É–ª—è—Ü–∏–∏.",
                researchLevel: "well_studied",
                culturalAcceptance: "accepted"
            },
            {
                name: "–§–µ—Ç–∏—à –Ω–∞ —Å—Ç—É–ø–Ω–∏ (Podophilia)",
                prevalence: 10.0,
                category: "body_parts",
                description: "–°–µ–∫—Å—É–∞–ª—å–Ω–æ–µ –≤–ª–µ—á–µ–Ω–∏–µ –∫ —Å—Ç—É–ø–Ω—è–º –Ω–æ–≥. –û–¥–∏–Ω –∏–∑ —Å–∞–º—ã—Ö —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã—Ö –ø–∞—Ä—Ç–∏–∞–ª–∏–∑–º–æ–≤. –ú–æ–∂–µ—Ç –≤–∫–ª—é—á–∞—Ç—å –∏–Ω—Ç–µ—Ä–µ—Å –∫ –ø–∞–ª—å—Ü–∞–º –Ω–æ–≥, —Ñ–æ—Ä–º–µ —Å—Ç–æ–ø—ã, —É—Ö–æ–¥—É –∑–∞ –Ω–æ–≥–∞–º–∏.",
                researchLevel: "well_studied",
                culturalAcceptance: "tolerated"
            },
            {
                name: "–§–µ—Ç–∏—à –Ω–∞ –∫–∏—Å—Ç–∏ —Ä—É–∫ (Chiroptophilia)",
                prevalence: 7.0,
                category: "body_parts",
                description: "–°–µ–∫—Å—É–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä–µ—Å –∫ —Ä—É–∫–∞–º –∏ –ø–∞–ª—å—Ü–∞–º. –í–∫–ª—é—á–∞–µ—Ç –≤–Ω–∏–º–∞–Ω–∏–µ –∫ —Ñ–æ—Ä–º–µ —Ä—É–∫, –¥–ª–∏–Ω–µ –ø–∞–ª—å—Ü–µ–≤, —É—Ö–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏ –Ω–æ–≥—Ç–µ–π.",
                researchLevel: "partially_studied",
                culturalAcceptance: "tolerated"
            },
            {
                name: "–§–µ—Ç–∏—à –Ω–∞ –≤–æ–ª–æ—Å—ã (Trichophilia)",
                prevalence: 6.5,
                category: "body_parts",
                description: "–°–µ–∫—Å—É–∞–ª—å–Ω–æ–µ –≤–æ–∑–±—É–∂–¥–µ–Ω–∏–µ –æ—Ç –≤–æ–ª–æ—Å - –∏—Ö —Ü–≤–µ—Ç–∞, —Ç–µ–∫—Å—Ç—É—Ä—ã, –¥–ª–∏–Ω—ã, –∑–∞–ø–∞—Ö–∞. –ú–æ–∂–µ—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è—Ç—å—Å—è –Ω–∞ –≤–æ–ª–æ—Å—ã –≥–æ–ª–æ–≤—ã, –ª–æ–±–∫–∞, –¥—Ä—É–≥–∏—Ö —á–∞—Å—Ç–µ–π —Ç–µ–ª–∞.",
                researchLevel: "partially_studied",
                culturalAcceptance: "tolerated"
            },
            {
                name: "–§–µ—Ç–∏—à –Ω–∞ –∂–∏–≤–æ—Ç (Gastropphilia)",
                prevalence: 4.0,
                category: "body_parts",
                description: "–ò–Ω—Ç–µ—Ä–µ—Å –∫ –∂–∏–≤–æ—Ç—É, –ø—É–ø–∫—É. –ß–∞—Å—Ç–æ —Å–≤—è–∑–∞–Ω —Å —Ç–∞–∫—Ç–∏–ª—å–Ω—ã–º–∏ –æ—â—É—â–µ–Ω–∏—è–º–∏ –∏ –≤–∏–∑—É–∞–ª—å–Ω—ã–º –≤–æ—Å–ø—Ä–∏—è—Ç–∏–µ–º.",
                researchLevel: "rarely_studied",
                culturalAcceptance: "tolerated"
            },
            {
                name: "–§–µ—Ç–∏—à –Ω–∞ –ø–æ–¥–º—ã—à–∫–∏ (Maschalagnia)",
                prevalence: 3.5,
                category: "body_parts",
                description: "–°–µ–∫—Å—É–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä–µ—Å –∫ –ø–æ–¥–º—ã—à–µ—á–Ω—ã–º –≤–ø–∞–¥–∏–Ω–∞–º, —á–∞—Å—Ç–æ —Å–≤—è–∑–∞–Ω —Å –∑–∞–ø–∞—Ö–æ–º, –≤–æ–ª–æ—Å–∞—Ç–æ—Å—Ç—å—é, —Ç–∞–∫—Ç–∏–ª—å–Ω—ã–º–∏ –æ—â—É—â–µ–Ω–∏—è–º–∏.",
                researchLevel: "rarely_studied",
                culturalAcceptance: "taboo"
            },

            // === –ö–ê–¢–ï–ì–û–†–ò–Ø: –ú–∞—Ç–µ—Ä–∏–∞–ª—ã –∏ —Ç–µ–∫—Å—Ç—É—Ä—ã ===
            {
                name: "–§–µ—Ç–∏—à –Ω–∞ –ª–∞—Ç–µ–∫—Å (Latex fetishism)",
                prevalence: 5.5,
                category: "materials",
                description: "–°–µ–∫—Å—É–∞–ª—å–Ω–æ–µ –≤–æ–∑–±—É–∂–¥–µ–Ω–∏–µ –æ—Ç –ª–∞—Ç–µ–∫—Å–∞ - –µ–≥–æ –±–ª–µ—Å–∫–∞, –∑–∞–ø–∞—Ö–∞, —Ç–∞–∫—Ç–∏–ª—å–Ω—ã—Ö –æ—â—É—â–µ–Ω–∏–π. –ß–∞—Å—Ç–æ –∞—Å—Å–æ—Ü–∏–∏—Ä—É–µ—Ç—Å—è —Å –ë–î–°–ú-–∫—É–ª—å—Ç—É—Ä–æ–π.",
                researchLevel: "partially_studied",
                culturalAcceptance: "tolerated"
            },
            {
                name: "–§–µ—Ç–∏—à –Ω–∞ –∫–æ–∂—É (Leather fetishism)",
                prevalence: 4.5,
                category: "materials",
                description: "–ò–Ω—Ç–µ—Ä–µ—Å –∫ –∫–æ–∂–∞–Ω–æ–π –æ–¥–µ–∂–¥–µ –∏ –∞–∫—Å–µ—Å—Å—É–∞—Ä–∞–º. –°–∏–ª—å–Ω–æ —Ä–∞–∑–≤–∏—Ç –≤ —Å—É–±–∫—É–ª—å—Ç—É—Ä–∞—Ö –±–∞–π–∫–µ—Ä–æ–≤ –∏ –ë–î–°–ú-—Å–æ–æ–±—â–µ—Å—Ç–≤–∞—Ö.",
                researchLevel: "partially_studied",
                culturalAcceptance: "tolerated"
            },
            {
                name: "–§–µ—Ç–∏—à –Ω–∞ —à—ë–ª–∫ (Silk fetishism)",
                prevalence: 3.0,
                category: "materials",
                description: "–í–æ–∑–±—É–∂–¥–µ–Ω–∏–µ –æ—Ç –ø—Ä–∏–∫–æ—Å–Ω–æ–≤–µ–Ω–∏—è –∫ —à—ë–ª–∫—É, –µ–≥–æ –≥–ª–∞–¥–∫–æ—Å—Ç–∏ –∏ –ø—Ä–æ—Ö–ª–∞–¥—ã. –ß–∞—Å—Ç–æ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –≤ –¥–µ—Ç—Å—Ç–≤–µ.",
                researchLevel: "rarely_studied",
                culturalAcceptance: "accepted"
            },
            {
                name: "–§–µ—Ç–∏—à –Ω–∞ –º–µ—Ö (Fur fetishism)",
                prevalence: 2.5,
                category: "materials",
                description: "–°–µ–∫—Å—É–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä–µ—Å –∫ –º–µ—Ö–æ–≤—ã–º –∏–∑–¥–µ–ª–∏—è–º, –∏—Ö —Ç–µ–∫—Å—Ç—É—Ä–µ, —Ç–µ–ø–ª–æ—Ç–µ, –≤–Ω–µ—à–Ω–µ–º—É –≤–∏–¥—É.",
                researchLevel: "rarely_studied",
                culturalAcceptance: "tolerated"
            },
            {
                name: "–§–µ—Ç–∏—à –Ω–∞ –¥–∂–∏–Ω—Å–æ–≤—É—é —Ç–∫–∞–Ω—å",
                prevalence: 2.0,
                category: "materials",
                description: "–ò–Ω—Ç–µ—Ä–µ—Å –∫ –¥–∂–∏–Ω—Å–æ–≤–æ–π —Ç–∫–∞–Ω–∏, –æ—Å–æ–±–µ–Ω–Ω–æ –∫–æ–≥–¥–∞ –æ–Ω–∞ –æ–±–ª–µ–≥–∞–µ—Ç —Ç–µ–ª–æ. –°–≤—è–∑–∞–Ω —Å —Ç–∞–∫—Ç–∏–ª—å–Ω—ã–º–∏ –∏ –≤–∏–∑—É–∞–ª—å–Ω—ã–º–∏ –æ—â—É—â–µ–Ω–∏—è–º–∏.",
                researchLevel: "not_studied",
                culturalAcceptance: "accepted"
            },

            // === –ö–ê–¢–ï–ì–û–†–ò–Ø: –û–¥–µ–∂–¥–∞ –∏ –æ–±—É–≤—å ===
            {
                name: "–§–µ—Ç–∏—à –Ω–∞ –æ–±—É–≤—å (Shoe fetishism)",
                prevalence: 6.0,
                category: "clothing",
                description: "–û–¥–∏–Ω –∏–∑ —Å–∞–º—ã—Ö —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã—Ö —Ñ–µ—Ç–∏—à–µ–π. –ú–æ–∂–µ—Ç –≤–∫–ª—é—á–∞—Ç—å –∏–Ω—Ç–µ—Ä–µ—Å –∫ —Ç—É—Ñ–ª—è–º –Ω–∞ –∫–∞–±–ª—É–∫–∞—Ö, –∫—Ä–æ—Å—Å–æ–≤–∫–∞–º, —Å–∞–ø–æ–≥–∞–º.",
                researchLevel: "partially_studied",
                culturalAcceptance: "tolerated"
            },
            {
                name: "–§–µ—Ç–∏—à –Ω–∞ —á—É–ª–∫–∏ –∏ –∫–æ–ª–≥–æ—Ç–∫–∏",
                prevalence: 5.0,
                category: "clothing",
                description: "–ò–Ω—Ç–µ—Ä–µ—Å –∫ —á—É–ª–∫–∞–º, –∫–æ–ª–≥–æ—Ç–∫–∞–º, –∏—Ö —Ç–µ–∫—Å—Ç—É—Ä–µ, –≤–Ω–µ—à–Ω–µ–º—É –≤–∏–¥—É –Ω–∞ —Ç–µ–ª–µ. –ß–∞—Å—Ç–æ —Å–æ—á–µ—Ç–∞–µ—Ç—Å—è —Å –¥—Ä—É–≥–∏–º–∏ —Ñ–µ—Ç–∏—à–∞–º–∏.",
                researchLevel: "partially_studied",
                culturalAcceptance: "tolerated"
            },
            {
                name: "–§–µ—Ç–∏—à –Ω–∞ –Ω–∏–∂–Ω–µ–µ –±–µ–ª—å—ë",
                prevalence: 4.5,
                category: "clothing",
                description: "–°–µ–∫—Å—É–∞–ª—å–Ω–æ–µ –≤–æ–∑–±—É–∂–¥–µ–Ω–∏–µ –æ—Ç –Ω–∏–∂–Ω–µ–≥–æ –±–µ–ª—å—è - –µ–≥–æ –≤–∏–¥–æ–≤, –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤, –≤–Ω–µ—à–Ω–µ–≥–æ –≤–∏–¥–∞ –Ω–∞ –ø–∞—Ä—Ç–Ω—ë—Ä–µ.",
                researchLevel: "partially_studied",
                culturalAcceptance: "tolerated"
            },
            {
                name: "–§–µ—Ç–∏—à –Ω–∞ —É–Ω–∏—Ñ–æ—Ä–º—É (Uniform fetishism)",
                prevalence: 3.5,
                category: "clothing",
                description: "–ò–Ω—Ç–µ—Ä–µ—Å –∫ —Ä–∞–∑–ª–∏—á–Ω—ã–º –≤–∏–¥–∞–º —É–Ω–∏—Ñ–æ—Ä–º—ã: –º–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–π, –≤–æ–µ–Ω–Ω–æ–π, —à–∫–æ–ª—å–Ω–æ–π, –æ—Ñ–∏—Å–Ω–æ–π.",
                researchLevel: "rarely_studied",
                culturalAcceptance: "tolerated"
            },
            {
                name: "–§–µ—Ç–∏—à –Ω–∞ –≤—ã—Å–æ–∫–∏–µ –∫–∞–±–ª—É–∫–∏",
                prevalence: 4.0,
                category: "clothing",
                description: "–°–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–π –∏–Ω—Ç–µ—Ä–µ—Å –∫ –æ–±—É–≤–∏ –Ω–∞ –≤—ã—Å–æ–∫–∏—Ö –∫–∞–±–ª—É–∫–∞—Ö, —á–∞—Å—Ç–æ —Å–≤—è–∑–∞–Ω —Å –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º –ø–æ—Ö–æ–¥–∫–∏ –∏ –æ—Å–∞–Ω–∫–∏.",
                researchLevel: "rarely_studied",
                culturalAcceptance: "tolerated"
            },

            // === –ö–ê–¢–ï–ì–û–†–ò–Ø: –ü–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–µ –∏ —Å–∏—Ç—É–∞—Ü–∏–æ–Ω–Ω—ã–µ ===
            {
                name: "–ë–î–°–ú-–ø—Ä–∞–∫—Ç–∏–∫–∏ (—É–º–µ—Ä–µ–Ω–Ω—ã–µ)",
                prevalence: 15.0,
                category: "behavioral",
                description: "–®–∏—Ä–æ–∫–∏–π —Å–ø–µ–∫—Ç—Ä –ø—Ä–∞–∫—Ç–∏–∫, –≤–∫–ª—é—á–∞—é—â–∏—Ö —ç–ª–µ–º–µ–Ω—Ç—ã –¥–æ–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏—è, –ø–æ–¥—á–∏–Ω–µ–Ω–∏—è, —Å–∞–¥–æ–º–∞–∑–æ—Ö–∏–∑–º–∞ –≤ consensual —Ñ–æ—Ä–º–µ.",
                researchLevel: "well_studied",
                culturalAcceptance: "tolerated"
            },
            {
                name: "–≠–∫—Å–≥–∏–±–∏—Ü–∏–æ–Ω–∏–∑–º (consensual)",
                prevalence: 4.0,
                category: "behavioral",
                description: "–ü–æ–ª—É—á–µ–Ω–∏–µ —É–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏—è –æ—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ —Å–≤–æ–µ–≥–æ —Ç–µ–ª–∞ —Å —Å–æ–≥–ª–∞—Å–∏—è –ø–∞—Ä—Ç–Ω—ë—Ä–∞ –∏–ª–∏ –≤ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –æ—Ç–≤–µ–¥—ë–Ω–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö.",
                researchLevel: "partially_studied",
                culturalAcceptance: "taboo"
            },
            {
                name: "–í—É–∞–π–µ—Ä–∏–∑–º (consensual)",
                prevalence: 4.5,
                category: "behavioral",
                description: "–ù–∞—Å–ª–∞–∂–¥–µ–Ω–∏–µ –æ—Ç –Ω–∞–±–ª—é–¥–µ–Ω–∏—è –∑–∞ –¥—Ä—É–≥–∏–º–∏ —Å –∏—Ö —Å–æ–≥–ª–∞—Å–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ —Ä–∞–º–∫–∞—Ö —à–æ—É –∏–ª–∏ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö –∫–ª—É–±–æ–≤).",
                researchLevel: "partially_studied",
                culturalAcceptance: "taboo"
            },
            {
                name: "–†–æ–ª–µ–≤—ã–µ –∏–≥—Ä—ã (Roleplay)",
                prevalence: 12.0,
                category: "behavioral",
                description: "–°–µ–∫—Å—É–∞–ª—å–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ —Å –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ–º —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ä–æ–ª–µ–π: —É—á–∏—Ç–µ–ª—å-—É—á–µ–Ω–∏–∫, –≤—Ä–∞—á-–ø–∞—Ü–∏–µ–Ω—Ç –∏ –¥—Ä.",
                researchLevel: "partially_studied",
                culturalAcceptance: "tolerated"
            },
            {
                name: "–§–µ—Ç–∏—à –Ω–∞ –¥–æ–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ",
                prevalence: 8.0,
                category: "behavioral",
                description: "–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–µ–∫—Å—É–∞–ª—å–Ω–æ–≥–æ —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω–∏—è –æ—Ç –∫–æ–Ω—Ç—Ä–æ–ª—è –Ω–∞–¥ –ø–∞—Ä—Ç–Ω—ë—Ä–æ–º –∏–ª–∏ —Å–∏—Ç—É–∞—Ü–∏–µ–π.",
                researchLevel: "partially_studied",
                culturalAcceptance: "tolerated"
            },
            {
                name: "–§–µ—Ç–∏—à –Ω–∞ –ø–æ–¥—á–∏–Ω–µ–Ω–∏–µ",
                prevalence: 7.5,
                category: "behavioral",
                description: "–£–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏–µ –æ—Ç –ø–µ—Ä–µ–¥–∞—á–∏ –∫–æ–Ω—Ç—Ä–æ–ª—è –ø–∞—Ä—Ç–Ω—ë—Ä—É –∏ —Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –µ–≥–æ —É–∫–∞–∑–∞–Ω–∏—è–º.",
                researchLevel: "partially_studied",
                culturalAcceptance: "tolerated"
            },

            // === –ö–ê–¢–ï–ì–û–†–ò–Ø: –ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –∏ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ ===
            {
                name: "–≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –º–∞–∑–æ—Ö–∏–∑–º",
                prevalence: 6.0,
                category: "psychological",
                description: "–ü–æ–ª—É—á–µ–Ω–∏–µ —É–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏—è –æ—Ç —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö —Å—Ç—Ä–∞–¥–∞–Ω–∏–π, —É–Ω–∏–∂–µ–Ω–∏–π –∏–ª–∏ –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–¥—á–∏–Ω–µ–Ω–∏—è.",
                researchLevel: "partially_studied",
                culturalAcceptance: "taboo"
            },
            {
                name: "–§–µ—Ç–∏—à –Ω–∞ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç (Sapiosexuality)",
                prevalence: 9.0,
                category: "psychological",
                description: "–°–∏–ª—å–Ω–æ–µ —Å–µ–∫—Å—É–∞–ª—å–Ω–æ–µ –≤–ª–µ—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É, —É–º—É –∏ –º–µ–Ω—Ç–∞–ª—å–Ω—ã–º —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—è–º –ø–∞—Ä—Ç–Ω—ë—Ä–∞.",
                researchLevel: "partially_studied",
                culturalAcceptance: "accepted"
            },
            {
                name: "–§–µ—Ç–∏—à –Ω–∞ –≥–æ–ª–æ—Å (Voice fetishism)",
                prevalence: 5.5,
                category: "psychological",
                description: "–°–µ–∫—Å—É–∞–ª—å–Ω–æ–µ –≤–æ–∑–±—É–∂–¥–µ–Ω–∏–µ –æ—Ç –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö —Ç–µ–º–±—Ä–æ–≤ –≥–æ–ª–æ—Å–∞, –∞–∫—Ü–µ–Ω—Ç–æ–≤ –∏–ª–∏ –º–∞–Ω–µ—Ä—ã —Ä–µ—á–∏.",
                researchLevel: "rarely_studied",
                culturalAcceptance: "tolerated"
            },

            // === –ö–ê–¢–ï–ì–û–†–ò–Ø: –†–µ–¥–∫–∏–µ –∏ —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–µ ===
            {
                name: "–ê–∫—Ä–æ—Ç–æ–º–æ—Ñ–∏–ª–∏—è",
                prevalence: 0.1,
                category: "rare",
                description: "–°–µ–∫—Å—É–∞–ª—å–Ω–æ–µ –≤–ª–µ—á–µ–Ω–∏–µ –∫ –ª—é–¥—è–º —Å –∞–º–ø—É—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –∫–æ–Ω–µ—á–Ω–æ—Å—Ç—è–º–∏. –ö—Ä–∞–π–Ω–µ —Ä–µ–¥–∫–æ–µ —è–≤–ª–µ–Ω–∏–µ.",
                researchLevel: "rarely_studied",
                culturalAcceptance: "stigmatized"
            },
            {
                name: "–•—Ä–µ–º–∞—Å—Ç–∏—Å—Ç–æ—Ñ–∏–ª–∏—è",
                prevalence: 1.0,
                category: "rare",
                description: "–°–µ–∫—Å—É–∞–ª—å–Ω–æ–µ –≤–æ–∑–±—É–∂–¥–µ–Ω–∏–µ –æ—Ç –æ–≥—Ä–∞–±–ª–µ–Ω–∏—è –∏–ª–∏ –±—ã—Ç—å –æ–≥—Ä–∞–±–ª–µ–Ω–Ω—ã–º. –ß–∞—Å—Ç–æ —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è –∫–∞–∫ —Ä–æ–ª–µ–≤–∞—è –∏–≥—Ä–∞.",
                researchLevel: "not_studied",
                culturalAcceptance: "stigmatized"
            },
            {
                name: "–°–æ–º–Ω–æ—Ñ–∏–ª–∏—è",
                prevalence: 2.0,
                category: "rare",
                description: "–°–µ–∫—Å—É–∞–ª—å–Ω–æ–µ –≤–æ–∑–±—É–∂–¥–µ–Ω–∏–µ –æ—Ç –∫–æ–Ω—Ç–∞–∫—Ç–∞ —Å–æ —Å–ø—è—â–∏–º –ø–∞—Ä—Ç–Ω—ë—Ä–æ–º. –¢—Ä–µ–±—É–µ—Ç –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Å–æ–≥–ª–∞—Å–∏—è.",
                researchLevel: "rarely_studied",
                culturalAcceptance: "taboo"
            },
            {
                name: "–§–µ—Ç–∏—à –Ω–∞ –≤–µ—Å (Gravitation fetish)",
                prevalence: 1.5,
                category: "rare",
                description: "–ò–Ω—Ç–µ—Ä–µ—Å –∫ –∏–∑–º–µ–Ω–µ–Ω–∏—é –≤–µ—Å–∞ —Ç–µ–ª–∞ - –∫–∞–∫ –Ω–∞–±–æ—Ä—É, —Ç–∞–∫ –∏ —Å–Ω–∏–∂–µ–Ω–∏—é. –ú–æ–∂–µ—Ç –±—ã—Ç—å —Å–≤—è–∑–∞–Ω —Å –∫–æ—Ä–º–ª–µ–Ω–∏–µ–º.",
                researchLevel: "not_studied",
                culturalAcceptance: "taboo"
            },
            {
                name: "–§–µ—Ç–∏—à –Ω–∞ —Ç–∞—Ç—É–∏—Ä–æ–≤–∫–∏ –∏ –ø–∏—Ä—Å–∏–Ω–≥",
                prevalence: 4.0,
                category: "rare",
                description: "–°–µ–∫—Å—É–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä–µ—Å –∫ —É–∫—Ä–∞—à–µ–Ω–∏—é —Ç–µ–ª–∞ —á–µ—Ä–µ–∑ —Ç–∞—Ç—É–∏—Ä–æ–≤–∫–∏, –ø–∏—Ä—Å–∏–Ω–≥, –¥—Ä—É–≥–∏–µ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏.",
                researchLevel: "rarely_studied",
                culturalAcceptance: "tolerated"
            }
        ];

        // –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
        const categories = {
            'all': '–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏',
            'body_parts': '–ß–∞—Å—Ç–∏ —Ç–µ–ª–∞',
            'materials': '–ú–∞—Ç–µ—Ä–∏–∞–ª—ã –∏ —Ç–µ–∫—Å—Ç—É—Ä—ã',
            'clothing': '–û–¥–µ–∂–¥–∞ –∏ –æ–±—É–≤—å',
            'behavioral': '–ü–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–µ',
            'psychological': '–ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ',
            'rare': '–†–µ–¥–∫–∏–µ –∏ —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–µ'
        };

        // –≠–ª–µ–º–µ–Ω—Ç—ã DOM
        const elements = {
            interestSelect: document.getElementById('interestSelect'),
            customInterest: document.getElementById('customInterest'),
            prevalenceInput: document.getElementById('prevalenceInput'),
            calculateBtn: document.getElementById('calculateBtn'),
            resultsSection: document.getElementById('resultsSection'),
            interestSubtitle: document.getElementById('interestSubtitle'),
            prevalenceResult: document.getElementById('prevalenceResult'),
            peopleRussia: document.getElementById('peopleRussia'),
            peopleWorld: document.getElementById('peopleWorld'),
            interestDescription: document.getElementById('interestDescription'),
            knowledgeBase: document.getElementById('knowledgeBase'),
            openEstimatorBtn: document.getElementById('openEstimatorBtn'),
            estimatorModal: document.getElementById('estimatorModal'),
            closeModalBtn: document.getElementById('closeModalBtn'),
            estimateBtn: document.getElementById('estimateBtn'),
            estimationResults: document.getElementById('estimationResults'),
            estimatedValue: document.getElementById('estimatedValue'),
            estimationExplanation: document.getElementById('estimationExplanation'),
            applyEstimationBtn: document.getElementById('applyEstimationBtn'),
            confidenceBadge: document.getElementById('confidenceBadge'),
            categoryFilter: document.getElementById('categoryFilter'),
            knowledgeSearch: document.getElementById('knowledgeSearch'),
            itemsCount: document.getElementById('itemsCount'),
            totalInterests: document.getElementById('totalInterests'),
            totalCategories: document.getElementById('totalCategories')
        };

        // –ü—Ä–∞–≤–∏–ª–∞ –¥–ª—è –æ—Ü–µ–Ω—â–∏–∫–∞
        const estimationRules = {
            interestType: {
                'common': { base: 12, weight: 0.3 },
                'behavioral': { base: 6, weight: 0.25 },
                'material': { base: 8, weight: 0.2 },
                'psychological': { base: 4, weight: 0.15 },
                'rare': { base: 0.8, weight: 0.1 }
            },
            socialVisibility: {
                'high': { multiplier: 1.5, confidence: 0.8 },
                'medium': { multiplier: 1.0, confidence: 0.6 },
                'low': { multiplier: 0.6, confidence: 0.4 },
                'very_low': { multiplier: 0.3, confidence: 0.2 }
            },
            complexityLevel: {
                'easy': { multiplier: 1.4 },
                'medium': { multiplier: 1.0 },
                'hard': { multiplier: 0.5 }
            }
        };

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
        });

        function initializeApp() {
            populateInterestDropdown();
            populateKnowledgeBase();
            setupEventListeners();
            displayDatabaseStats();
        }

        function populateInterestDropdown() {
            interestsDatabase.forEach(interest => {
                const option = document.createElement('option');
                option.value = interest.name;
                option.textContent = `${interest.name} (${interest.prevalence}%)`;
                elements.interestSelect.appendChild(option);
            });
        }

        function populateKnowledgeBase() {
            filterAndDisplayKnowledge();
            setupFilters();
        }

        function setupFilters() {
            const categoryFilter = document.getElementById('categoryFilter');
            const knowledgeSearch = document.getElementById('knowledgeSearch');
            
            categoryFilter.addEventListener('change', filterAndDisplayKnowledge);
            knowledgeSearch.addEventListener('input', filterAndDisplayKnowledge);
        }

        function filterAndDisplayKnowledge() {
            const categoryFilter = document.getElementById('categoryFilter');
            const knowledgeSearch = document.getElementById('knowledgeSearch');
            const itemsCount = document.getElementById('itemsCount');
            
            const selectedCategory = categoryFilter.value;
            const searchTerm = knowledgeSearch.value.toLowerCase();
            
            // –§–∏–ª—å—Ç—Ä—É–µ–º –º–∞—Å—Å–∏–≤
            let filteredItems = interestsDatabase;
            
            // –ü—Ä–∏–º–µ–Ω—è–µ–º —Ñ–∏–ª—å—Ç—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
            if (selectedCategory !== 'all') {
                filteredItems = filteredItems.filter(item => item.category === selectedCategory);
            }
            
            // –ü—Ä–∏–º–µ–Ω—è–µ–º –ø–æ–∏—Å–∫
            if (searchTerm) {
                filteredItems = filteredItems.filter(item => 
                    item.name.toLowerCase().includes(searchTerm) ||
                    item.description.toLowerCase().includes(searchTerm)
                );
            }
            
            // –û—á–∏—â–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
            elements.knowledgeBase.innerHTML = '';
            
            // –î–æ–±–∞–≤–ª—è–µ–º –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
            filteredItems.forEach(interest => {
                const knowledgeItem = createKnowledgeItem(interest);
                elements.knowledgeBase.appendChild(knowledgeItem);
            });
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á—ë—Ç—á–∏–∫
            itemsCount.textContent = `–ù–∞–π–¥–µ–Ω–æ ${filteredItems.length} –∏–Ω—Ç–µ—Ä–µ—Å–æ–≤`;
        }

        function createKnowledgeItem(interest) {
            const knowledgeItem = document.createElement('div');
            knowledgeItem.className = 'knowledge-item';
            
            const researchText = getResearchText(interest.researchLevel);
            const acceptanceText = getAcceptanceText(interest.culturalAcceptance);
            
            knowledgeItem.innerHTML = `
                <div class="category-badge category-${interest.category}">
                    ${categories[interest.category]}
                </div>
                <h3>${interest.name}</h3>
                <div class="knowledge-meta">
                    <div class="knowledge-prevalence">${interest.prevalence}% –Ω–∞—Å–µ–ª–µ–Ω–∏—è</div>
                    <div class="research-indicator">${researchText}</div>
                </div>
                <p>${interest.description}</p>
                <div class="knowledge-footer">
                    <span>${acceptanceText}</span>
                    <button class="use-interest-btn secondary-btn">–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å</button>
                </div>
            `;
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –Ω–∞ –∫–Ω–æ–ø–∫—É "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å"
            const useButton = knowledgeItem.querySelector('.use-interest-btn');
            useButton.addEventListener('click', (e) => {
                e.stopPropagation();
                useInterestInCalculator(interest);
            });
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –Ω–∞ –≤—Å—é –∫–∞—Ä—Ç–æ—á–∫—É
            knowledgeItem.addEventListener('click', () => {
                useInterestInCalculator(interest);
            });
            
            return knowledgeItem;
        }

        function useInterestInCalculator(interest) {
            elements.interestSelect.value = interest.name;
            elements.prevalenceInput.value = interest.prevalence;
            elements.customInterest.value = '';
            calculateResults();
            
            // –ü—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º –∫ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä—É
            document.querySelector('.calculator-section').scrollIntoView({ 
                behavior: 'smooth' 
            });
        }

        // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤
        function getResearchText(level) {
            const researchMap = {
                'well_studied': '–•–æ—Ä–æ—à–æ –∏–∑—É—á–µ–Ω',
                'partially_studied': '–ß–∞—Å—Ç–∏—á–Ω–æ –∏–∑—É—á–µ–Ω',
                'rarely_studied': '–ú–∞–ª–æ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π',
                'not_studied': '–ù–µ –∏–∑—É—á–µ–Ω'
            };
            return researchMap[level] || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ';
        }

        function getAcceptanceText(acceptance) {
            const acceptanceMap = {
                'accepted': '–°–æ—Ü–∏–∞–ª—å–Ω–æ –ø—Ä–∏–µ–º–ª–µ–º',
                'tolerated': '–¢–µ—Ä–ø–∏–º—ã–π',
                'taboo': '–¢–∞–±—É–∏—Ä–æ–≤–∞–Ω',
                'stigmatized': '–°—Ç–∏–≥–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω'
            };
            return acceptanceMap[acceptance] || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ';
        }

        function displayDatabaseStats() {
            const totalInterests = document.getElementById('totalInterests');
            const totalCategories = document.getElementById('totalCategories');
            
            totalInterests.textContent = interestsDatabase.length;
            totalCategories.textContent = Object.keys(categories).length - 1; // minus 'all'
        }

        function setupEventListeners() {
            // –û—Å–Ω–æ–≤–Ω–æ–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä
            elements.calculateBtn.addEventListener('click', calculateResults);
            
            // –û—Ü–µ–Ω—â–∏–∫
            elements.openEstimatorBtn.addEventListener('click', openEstimator);
            elements.closeModalBtn.addEventListener('click', closeEstimator);
            elements.estimateBtn.addEventListener('click', calculateEstimation);
            elements.applyEstimationBtn.addEventListener('click', applyEstimation);
            
            // –í—ã–±–æ—Ä –∏–∑ —Å–ø–∏—Å–∫–∞
            elements.interestSelect.addEventListener('change', function() {
                if (this.value) {
                    const selectedInterest = interestsDatabase.find(interest => interest.name === this.value);
                    if (selectedInterest) {
                        elements.prevalenceInput.value = selectedInterest.prevalence;
                        elements.customInterest.value = '';
                    }
                }
            });
            
            // –í–≤–æ–¥ —Å–≤–æ–µ–≥–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞
            elements.customInterest.addEventListener('input', function() {
                if (this.value) {
                    elements.interestSelect.value = '';
                }
            });
            
            // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø–æ –∫–ª–∏–∫—É –≤–Ω–µ –µ–≥–æ
            elements.estimatorModal.addEventListener('click', function(e) {
                if (e.target === this) {
                    closeEstimator();
                }
            });
        }

        function calculateResults() {
            let interestName, prevalenceValue, description;

            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∏–º—è –∏–Ω—Ç–µ—Ä–µ—Å–∞
            if (elements.customInterest.value.trim() !== '') {
                interestName = elements.customInterest.value.trim();
                description = "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä–µ—Å. –î–∞–Ω–Ω—ã–µ –æ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω–æ—Å—Ç–∏ –æ—Å–Ω–æ–≤–∞–Ω—ã –Ω–∞ –≤–∞—à–µ–º –≤–≤–æ–¥–µ.";
            } else if (elements.interestSelect.value) {
                const selectedInterest = interestsDatabase.find(interest => interest.name === elements.interestSelect.value);
                interestName = selectedInterest.name;
                description = selectedInterest.description;
                prevalenceValue = selectedInterest.prevalence;
            } else {
                showError("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –∏–Ω—Ç–µ—Ä–µ—Å –∏–∑ —Å–ø–∏—Å–∫–∞ –∏–ª–∏ –≤–≤–µ–¥–∏—Ç–µ —Å–≤–æ–π –≤–∞—Ä–∏–∞–Ω—Ç.");
                return;
            }

            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω–æ—Å—Ç—å
            if (elements.prevalenceInput.value && !isNaN(parseFloat(elements.prevalenceInput.value))) {
                prevalenceValue = parseFloat(elements.prevalenceInput.value);
            } else if (!prevalenceValue) {
                showError("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–∫–∞–∂–∏—Ç–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω–æ—Å—Ç—å –∏–Ω—Ç–µ—Ä–µ—Å–∞ –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö.");
                return;
            }

            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –ø—Ä–æ—Ü–µ–Ω—Ç–∞
            if (prevalenceValue < 0 || prevalenceValue > 100) {
                showError("–†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω–æ—Å—Ç—å –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ –æ—Ç 0 –¥–æ 100%.");
                return;
            }

            // –í—ã–ø–æ–ª–Ω—è–µ–º —Ä–∞—Å—á–µ—Ç—ã
            displayResults(interestName, prevalenceValue, description);
        }

        function displayResults(interestName, prevalence, description) {
            const populationRussia = 144000000;
            const populationWorld = 8000000000;

            const peopleInRussia = Math.round(populationRussia * prevalence / 100);
            const peopleInWorld = Math.round(populationWorld * prevalence / 100);

            // –û–±–Ω–æ–≤–ª—è–µ–º UI
            elements.interestSubtitle.textContent = `–ê–Ω–∞–ª–∏–∑: ${interestName}`;
            elements.prevalenceResult.textContent = `${prevalence.toFixed(2)}%`;
            elements.peopleRussia.textContent = `${formatNumber(peopleInRussia)} —á–µ–ª.`;
            elements.peopleWorld.textContent = `${formatNumber(peopleInWorld)} —á–µ–ª.`;
            elements.interestDescription.textContent = description;

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
            elements.resultsSection.classList.remove('hidden');
            
            // –°—Ç—Ä–æ–∏–º –≥—Ä–∞—Ñ–∏–∫
            renderChart(prevalence, interestName);
            
            // –ü—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º –∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º
            elements.resultsSection.scrollIntoView({ behavior: 'smooth' });
        }

        function renderChart(prevalence, interestName) {
            const ctx = document.getElementById('prevalenceChart').getContext('2d');

            // –£–Ω–∏—á—Ç–æ–∂–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–π –≥—Ä–∞—Ñ–∏–∫
            if (window.prevalenceChartInstance) {
                window.prevalenceChartInstance.destroy();
            }

            window.prevalenceChartInstance = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: [interestName, '–û—Å—Ç–∞–ª—å–Ω–æ–µ –Ω–∞—Å–µ–ª–µ–Ω–∏–µ'],
                    datasets: [{
                        data: [prevalence, 100 - prevalence],
                        backgroundColor: ['#0ea5e9', '#e5e7eb'],
                        borderWidth: 0,
                        hoverOffset: 15
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    cutout: '60%',
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 20,
                                usePointStyle: true
                            }
                        }
                    },
                    animation: {
                        animateScale: true,
                        animateRotate: true
                    }
                }
            });
        }

        function openEstimator() {
            elements.estimatorModal.classList.remove('hidden');
            elements.estimationResults.classList.add('hidden');
        }

        function closeEstimator() {
            elements.estimatorModal.classList.add('hidden');
        }

        function calculateEstimation() {
            const interestType = document.getElementById('interestType').value;
            const socialVisibility = document.getElementById('socialVisibility').value;
            const complexityLevel = document.getElementById('complexityLevel').value;

            // –†–∞—Å—á–µ—Ç –æ—Ü–µ–Ω–∫–∏
            let basePrevalence = estimationRules.interestType[interestType].base;
            let prevalence = basePrevalence * 
                            estimationRules.socialVisibility[socialVisibility].multiplier * 
                            estimationRules.complexityLevel[complexityLevel].multiplier;

            // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –¥–∏–∞–ø–∞–∑–æ–Ω
            prevalence = Math.max(0.1, Math.min(30, prevalence));

            // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å
            const confidence = estimationRules.socialVisibility[socialVisibility].confidence;

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
            showEstimationResults(prevalence, confidence);
        }

        function showEstimationResults(prevalence, confidence) {
            elements.estimatedValue.textContent = `${prevalence.toFixed(2)}%`;
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —É—Ä–æ–≤–µ–Ω—å —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏
            let confidenceText, confidenceColor;
            if (confidence >= 0.7) {
                confidenceText = '–í—ã—Å–æ–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å';
                confidenceColor = '#10b981';
            } else if (confidence >= 0.5) {
                confidenceText = '–°—Ä–µ–¥–Ω—è—è —Ç–æ—á–Ω–æ—Å—Ç—å';
                confidenceColor = '#f59e0b';
            } else {
                confidenceText = '–ù–∏–∑–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å';
                confidenceColor = '#ef4444';
            }
            
            elements.confidenceBadge.textContent = confidenceText;
            elements.confidenceBadge.style.background = confidenceColor;
            
            // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ
            elements.estimationExplanation.textContent = 
                `–û—Ü–µ–Ω–∫–∞ –æ—Å–Ω–æ–≤–∞–Ω–∞ –Ω–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö: —Ç–∏–ø –∏–Ω—Ç–µ—Ä–µ—Å–∞, —Å–æ—Ü–∏–∞–ª—å–Ω–∞—è –≤–∏–¥–∏–º–æ—Å—Ç—å –∏ —Å–ª–æ–∂–Ω–æ—Å—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏. ` +
                `–£—Ä–æ–≤–µ–Ω—å —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏: ${Math.round(confidence * 100)}%.`;
            
            elements.estimationResults.classList.remove('hidden');
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â—É—é –æ—Ü–µ–Ω–∫—É
            window.currentEstimation = prevalence;
        }

        function applyEstimation() {
            if (window.currentEstimation) {
                elements.prevalenceInput.value = window.currentEstimation.toFixed(2);
                closeEstimator();
                
                // –ï—Å–ª–∏ –Ω–µ –≤—ã–±—Ä–∞–Ω –∏–Ω—Ç–µ—Ä–µ—Å, –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º –≤–≤–µ—Å—Ç–∏
                if (!elements.interestSelect.value && !elements.customInterest.value) {
                    elements.customInterest.value = '–û—Ü–µ–Ω—ë–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä–µ—Å';
                }
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
                setTimeout(() => {
                    elements.calculateBtn.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }, 300);
            }
        }

        function showError(message) {
            alert(message);
        }

        function formatNumber(num) {
            if (num >= 1000000) {
                return (num / 1000000).toFixed(1) + ' –º–ª–Ω';
            } else if (num >= 1000) {
                return (num / 1000).toFixed(1) + ' —Ç—ã—Å';
            }
            return new Intl.NumberFormat('ru-RU').format(num);
        }
    </script>
</body>
</html>